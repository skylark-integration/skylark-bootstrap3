/**
 * skylark-bootstrap3 - The skylark standard widget tookit
 * @author Hudaokeji, Inc.
 * @version v0.9.2
 * @link https://github.com/skylarkui/skylark-bootstrap3/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-utils-dom/browser","skylark-utils-dom/eventer","skylark-utils-dom/noder","skylark-utils-dom/geom","skylark-utils-dom/query","skylark-utils-dom/plugins","./bs3"],function(t,e,r,n,o,a,i,s){"use strict";var d=".dropdown-backdrop",l='[data-toggle="dropdown"]',c=s.Dropdown=i.Plugin.inherit({klassName:"Dropdown",pluginName:"bs3.dropdown",_construct:function(t,e){var r=this.$element=a(t);r.on("click.bs.dropdown",this.toggle),r.on("keydown.bs.dropdown",'[data-toggle="dropdown"],.dropdown-menu',this.keydown)},toggle:function(t){var e=a(this);if(!e.is(".disabled, :disabled")){var n=g(e),o=n.hasClass("open");if(p(),!o){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",p);var i={relatedTarget:this};if(n.trigger(t=r.create("show.bs.dropdown",i)),t.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),n.toggleClass("open").trigger(r.create("shown.bs.dropdown",i))}return!1}},keydown:function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var e=a(this);if(t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled")){var r=g(e),n=r.hasClass("open");if(!n&&27!=t.which||n&&27==t.which)return 27==t.which&&r.find(l).trigger("focus"),e.trigger("click");var o=r.find(".dropdown-menu li:not(.disabled):visible a");if(o.length){var i=o.index(t.target);38==t.which&&i>0&&i--,40==t.which&&i<o.length-1&&i++,~i||(i=0),o.eq(i).trigger("focus")}}}}});function g(t){var e=t.attr("data-target");e||(e=(e=t.attr("href"))&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""));var r=e&&a(e);return r&&r.length?r:t.parent()}function p(t){t&&3===t.which||(a(d).remove(),a(l).each(function(){var e=a(this),o=g(e),i={relatedTarget:this};o.hasClass("open")&&(t&&"click"==t.type&&/input|textarea/i.test(t.target.tagName)&&n.contains(o[0],t.target)||(o.trigger(t=r.create("hide.bs.dropdown",i)),t.isDefaultPrevented()||(e.attr("aria-expanded","false"),o.removeClass("open").trigger(r.create("hidden.bs.dropdown",i)))))}))}return c.VERSION="3.3.7",a(document).on("click.bs.dropdown.data-api",p).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}),i.register(c),a.fn.dropdown=function(t){return this.each(function(){var t=i.instantiate(this,"bs3.dropdown");"string"==typeof option&&t[option]()})},c});
//# sourceMappingURL=sourcemaps/dropdown.js.map
