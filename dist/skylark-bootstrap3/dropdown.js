/**
 * skylark-bootstrap3 - The skylark standard widget tookit
 * @author Hudaokeji, Inc.
 * @version v0.9.2
 * @link https://github.com/skylarkui/skylark-bootstrap3/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-domx-query","skylark-domx-plugins","./bs3"],function(e,t,r,a,n,o,d,i){"use strict";var s=".dropdown-backdrop",l='[data-toggle="dropdown"]',c=i.Dropdown=d.Plugin.inherit({klassName:"Dropdown",pluginName:"bs3.dropdown",_construct:function(e,t){var r=this.$element=o(e);r.on("click.bs.dropdown",this.toggle),r.on("keydown.bs.dropdown",'[data-toggle="dropdown"],.dropdown-menu',this.keydown)},toggle:function(e){var t=o(this);if(!t.is(".disabled, :disabled")){var a=g(t),n=a.hasClass("open");if(p(),!n){"ontouchstart"in document.documentElement&&!a.closest(".navbar-nav").length&&o(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(o(this)).on("click",p);var d={relatedTarget:this};if(a.trigger(e=r.create("show.bs.dropdown",d)),e.isDefaultPrevented())return;t.trigger("focus").attr("aria-expanded","true"),a.toggleClass("open").trigger(r.create("shown.bs.dropdown",d))}return!1}},keydown:function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var t=o(this);if(e.preventDefault(),e.stopPropagation(),!t.is(".disabled, :disabled")){var r=g(t),a=r.hasClass("open");if(!a&&27!=e.which||a&&27==e.which)return 27==e.which&&r.find(l).trigger("focus"),t.trigger("click");var n=r.find(".dropdown-menu li:not(.disabled):visible a");if(n.length){var d=n.index(e.target);38==e.which&&d>0&&d--,40==e.which&&d<n.length-1&&d++,~d||(d=0),n.eq(d).trigger("focus")}}}}});function g(e){var t=e.attr("data-target");t||(t=(t=e.attr("href"))&&/#[A-Za-z]/.test(t)&&t.replace(/.*(?=#[^\s]*$)/,""));var r=t&&o(t);return r&&r.length?r:e.parent()}function p(e){e&&3===e.which||(o(s).remove(),o(l).each(function(){var t=o(this),n=g(t),d={relatedTarget:this};n.hasClass("open")&&(e&&"click"==e.type&&/input|textarea/i.test(e.target.tagName)&&a.contains(n[0],e.target)||(n.trigger(e=r.create("hide.bs.dropdown",d)),e.isDefaultPrevented()||(t.attr("aria-expanded","false"),n.removeClass("open").trigger(r.create("hidden.bs.dropdown",d)))))}))}return c.VERSION="3.3.7",o(document).on("click.bs.dropdown.data-api",p).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}),d.register(c,"dropdown"),c});
//# sourceMappingURL=sourcemaps/dropdown.js.map
