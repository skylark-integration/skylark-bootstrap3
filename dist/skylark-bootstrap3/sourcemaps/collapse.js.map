{"version":3,"sources":["collapse.js"],"names":["define","langx","browser","eventer","noder","geom","$","plugins","bs3","Collapse","Plugin","inherit","klassName","pluginName","_construct","element","options","mixin","DEFAULTS","data","this","overrided","$element","$trigger","id","transitioning","parent","$parent","getParent","addAriaAndCollapsedClass","toggle","dimension","hasClass","show","activesData","actives","children","length","startEvent","create","trigger","isDefaultPrevented","collapse","hide","removeClass","addClass","attr","complete","support","transition","call","scrollSize","camelCase","join","one","proxy","emulateTransitionEnd","TRANSITION_DURATION","offsetHeight","find","each","i","href","target","replace","end","isOpen","toggleClass","VERSION","register"],"mappings":"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","file":"../collapse.js","sourcesContent":["define([\n    \"skylark-langx/langx\",\n    \"skylark-utils-dom/browser\",\n    \"skylark-utils-dom/eventer\",\n    \"skylark-utils-dom/noder\",\n    \"skylark-utils-dom/geom\",\n    \"skylark-utils-dom/query\",\n    \"skylark-utils-dom/plugins\",\n    \"./bs3\",\n    \"./transition\"\n], function(langx, browser, eventer, noder, geom, $, plugins, bs3) {\n\n\n/* ========================================================================\n * Bootstrap: collapse.js v3.3.7\n * http://getbootstrap.com/javascript/#collapse\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n/* jshint latedef: false */\n\n  'use strict';\n\n  // COLLAPSE PUBLIC CLASS DEFINITION\n  // ================================\n\n  var Collapse = bs3.Collapse = plugins.Plugin.inherit({\n    klassName: \"Collapse\",\n\n    pluginName : \"bs3.collapse\",\n\n    _construct : function(element,options) {\n      options = langx.mixin({}, Collapse.DEFAULTS, $(element).data(), options)\n      this.overrided(element,options);\n\n      this.$element      = $(element)\n      this.$trigger      = $('[data-toggle=\"collapse\"][href=\"#' + element.id + '\"],' +\n                             '[data-toggle=\"collapse\"][data-target=\"#' + element.id + '\"]')\n      this.transitioning = null\n\n      if (this.options.parent) {\n        this.$parent = this.getParent()\n      } else {\n        this.addAriaAndCollapsedClass(this.$element, this.$trigger)\n      }\n\n      if (this.options.toggle) {\n        this.toggle();\n      }\n    },\n\n    dimension : function () {\n      var hasWidth = this.$element.hasClass('width')\n      return hasWidth ? 'width' : 'height'\n    },\n\n    show : function () {\n      if (this.transitioning || this.$element.hasClass('in')) return\n\n      var activesData\n      var actives = this.$parent && this.$parent.children('.panel').children('.in, .collapsing')\n\n      if (actives && actives.length) {\n        activesData = actives.data('bs.collapse')\n        if (activesData && activesData.transitioning) return\n      }\n\n      var startEvent = eventer.create('show.bs.collapse')\n      this.$element.trigger(startEvent)\n      if (startEvent.isDefaultPrevented()) return\n\n      if (actives && actives.length) {\n        //Plugin.call(actives, 'hide')\n        actives.collapse().hide();\n        activesData || actives.data('bs.collapse', null)\n      }\n\n      var dimension = this.dimension()\n\n      this.$element\n        .removeClass('collapse')\n        .addClass('collapsing')[dimension](0)\n        .attr('aria-expanded', true)\n\n      this.$trigger\n        .removeClass('collapsed')\n        .attr('aria-expanded', true)\n\n      this.transitioning = 1\n\n      var complete = function () {\n        this.$element\n          .removeClass('collapsing')\n          .addClass('collapse in')[dimension]('')\n        this.transitioning = 0\n        this.$element\n          .trigger('shown.bs.collapse')\n      }\n\n      if (!browser.support.transition) return complete.call(this)\n\n      var scrollSize = langx.camelCase(['scroll', dimension].join('-'))\n\n      this.$element\n        .one('transitionEnd', langx.proxy(complete, this))\n        .emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])\n    },\n\n    hide : function () {\n      if (this.transitioning || !this.$element.hasClass('in')) return\n\n      var startEvent = eventer.create('hide.bs.collapse')\n      this.$element.trigger(startEvent)\n      if (startEvent.isDefaultPrevented()) return\n\n      var dimension = this.dimension()\n\n      this.$element[dimension](this.$element[dimension]())[0].offsetHeight\n\n      this.$element\n        .addClass('collapsing')\n        .removeClass('collapse in')\n        .attr('aria-expanded', false)\n\n      this.$trigger\n        .addClass('collapsed')\n        .attr('aria-expanded', false)\n\n      this.transitioning = 1\n\n      var complete = function () {\n        this.transitioning = 0\n        this.$element\n          .removeClass('collapsing')\n          .addClass('collapse')\n          .trigger('hidden.bs.collapse')\n      }\n\n      if (!browser.support.transition) return complete.call(this)\n\n      this.$element\n        [dimension](0)\n        .one('transitionEnd', langx.proxy(complete, this))\n        .emulateTransitionEnd(Collapse.TRANSITION_DURATION)\n    },\n\n    toggle : function () {\n      this[this.$element.hasClass('in') ? 'hide' : 'show']()\n    },\n\n    getParent : function () {\n      return $(this.options.parent)\n        .find('[data-toggle=\"collapse\"][data-parent=\"' + this.options.parent + '\"]')\n        .each(langx.proxy(function (i, element) {\n          var $element = $(element)\n          this.addAriaAndCollapsedClass(getTargetFromTrigger($element), $element)\n        }, this))\n        .end()\n    },\n\n    addAriaAndCollapsedClass : function ($element, $trigger) {\n      var isOpen = $element.hasClass('in')\n\n      $element.attr('aria-expanded', isOpen)\n      $trigger\n        .toggleClass('collapsed', !isOpen)\n        .attr('aria-expanded', isOpen)\n    }\n\n  });\n\n  Collapse.VERSION  = '3.3.7'\n\n  Collapse.TRANSITION_DURATION = 350\n\n  Collapse.DEFAULTS = {\n    toggle: true\n  }\n\n\n  function getTargetFromTrigger($trigger) {\n    var href\n    var target = $trigger.attr('data-target')\n      || (href = $trigger.attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '') // strip for ie7\n\n    return $(target)\n  }\n\n\n  // COLLAPSE PLUGIN DEFINITION\n  // ==========================\n\n  /*\n  function Plugin(option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.collapse')\n      var options = langx.mixin({}, Collapse.DEFAULTS, $this.data(), typeof option == 'object' && option)\n\n      if (!data && options.toggle && /show|hide/.test(option)) options.toggle = false\n      if (!data) $this.data('bs.collapse', (data = new Collapse(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  var old = $.fn.collapse\n\n  $.fn.collapse             = Plugin;\n  $.fn.collapse.Constructor = Collapse;\n\n  // COLLAPSE NO CONFLICT\n  // ====================\n\n  $.fn.collapse.noConflict = function () {\n    $.fn.collapse = old\n    return this\n  }\n  */\n\n  plugins.register(Collapse,\"collapse\");\n\n  return Collapse;\n\n});\n"]}