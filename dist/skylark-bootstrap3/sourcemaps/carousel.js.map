{"version":3,"sources":["carousel.js"],"names":["define","langx","browser","eventer","noder","geom","$","plugins","bs3","Carousel","Plugin","inherit","klassName","pluginName","options","interval","pause","wrap","keyboard","_construct","element","this","overrided","$element","$indicators","find","paused","sliding","$active","$items","on","proxy","keydown","document","documentElement","cycle","VERSION","TRANSITION_DURATION","DEFAULTS","prototype","e","test","target","tagName","which","prev","next","preventDefault","clearInterval","setInterval","getItemIndex","item","parent","children","index","getItemForDirection","direction","active","activeIndex","willWrap","length","delta","itemIndex","eq","to","pos","that","one","slide","support","transition","trigger","end","type","$next","isCycling","hasClass","relatedTarget","slideEvent","create","isDefaultPrevented","removeClass","$nextIndicator","addClass","slidEvent","offsetWidth","join","setTimeout","emulateTransitionEnd","register"],"mappings":"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","file":"../carousel.js","sourcesContent":["define([\n    \"skylark-langx/langx\",\n    \"skylark-utils-dom/browser\",\n    \"skylark-utils-dom/eventer\",\n    \"skylark-utils-dom/noder\",\n    \"skylark-utils-dom/geom\",\n    \"skylark-utils-dom/query\",\n    \"skylark-utils-dom/plugins\",\n    \"./bs3\"\n], function(langx, browser, eventer, noder, geom, $, plugins, bs3) {\n\n    /* ========================================================================\n     * Bootstrap: carousel.js v3.3.7\n     * http://getbootstrap.com/javascript/#carousel\n     * ========================================================================\n     * Copyright 2011-2016 Twitter, Inc.\n     * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n     * ======================================================================== */\n\n    'use strict';\n\n    // CAROUSEL CLASS DEFINITION\n    // =========================\n\n    var Carousel = bs3.Carousel = plugins.Plugin.inherit({\n        klassName: \"Carousel\",\n\n        pluginName: \"bs3.carousel\",\n\n        options : {\n            interval: 5000,\n            pause: 'hover',\n            wrap: true,\n            keyboard: true\n\n        },\n\n        _construct: function(element, options) {\n            //this.options = options\n            this.overrided(element,options);\n\n            this.$element = $(element)\n            this.$indicators = this.$element.find('.carousel-indicators')\n            this.paused = null\n            this.sliding = null\n            this.interval = null\n            this.$active = null\n            this.$items = null\n\n            this.options.keyboard && this.$element.on('keydown.bs.carousel', langx.proxy(this.keydown, this))\n\n            this.options.pause == 'hover' && !('ontouchstart' in document.documentElement) && this.$element\n                .on('mouseenter.bs.carousel', langx.proxy(this.pause, this))\n                .on('mouseleave.bs.carousel', langx.proxy(this.cycle, this));\n\n        }\n    });\n\n    // var Carousel = function (element, options) {\n    // }\n\n    Carousel.VERSION = '3.3.7'\n\n    Carousel.TRANSITION_DURATION = 600\n\n    Carousel.DEFAULTS = {\n        interval: 5000,\n        pause: 'hover',\n        wrap: true,\n        keyboard: true\n    }\n\n    Carousel.prototype.keydown = function(e) {\n        if (/input|textarea/i.test(e.target.tagName)) return\n        switch (e.which) {\n            case 37:\n                this.prev();\n                break\n            case 39:\n                this.next();\n                break\n            default:\n                return\n        }\n\n        e.preventDefault()\n    }\n\n    Carousel.prototype.cycle = function(e) {\n        e || (this.paused = false)\n\n        this.interval && clearInterval(this.interval)\n\n        this.options.interval &&\n            !this.paused &&\n            (this.interval = setInterval(langx.proxy(this.next, this), this.options.interval))\n\n        return this\n    }\n\n    Carousel.prototype.getItemIndex = function(item) {\n        this.$items = item.parent().children('.item')\n        return this.$items.index(item || this.$active)\n    }\n\n    Carousel.prototype.getItemForDirection = function(direction, active) {\n        var activeIndex = this.getItemIndex(active)\n        var willWrap = (direction == 'prev' && activeIndex === 0) ||\n            (direction == 'next' && activeIndex == (this.$items.length - 1))\n        if (willWrap && !this.options.wrap) return active\n        var delta = direction == 'prev' ? -1 : 1\n        var itemIndex = (activeIndex + delta) % this.$items.length\n        return this.$items.eq(itemIndex)\n    }\n\n    Carousel.prototype.to = function(pos) {\n        var that = this\n        var activeIndex = this.getItemIndex(this.$active = this.$element.find('.item.active'))\n\n        if (pos > (this.$items.length - 1) || pos < 0) return\n\n        if (this.sliding) return this.$element.one('slid.bs.carousel', function() { that.to(pos) }) // yes, \"slid\"\n        if (activeIndex == pos) return this.pause().cycle()\n\n        return this.slide(pos > activeIndex ? 'next' : 'prev', this.$items.eq(pos))\n    }\n\n    Carousel.prototype.pause = function(e) {\n        e || (this.paused = true)\n\n        if (this.$element.find('.next, .prev').length && browser.support.transition) {\n            this.$element.trigger(browser.support.transition.end)\n            this.cycle(true)\n        }\n\n        this.interval = clearInterval(this.interval)\n\n        return this\n    }\n\n    Carousel.prototype.next = function() {\n        if (this.sliding) return\n        return this.slide('next')\n    }\n\n    Carousel.prototype.prev = function() {\n        if (this.sliding) return\n        return this.slide('prev')\n    }\n\n    Carousel.prototype.slide = function(type, next) {\n        var $active = this.$element.find('.item.active')\n        var $next = next || this.getItemForDirection(type, $active)\n        var isCycling = this.interval\n        var direction = type == 'next' ? 'left' : 'right'\n        var that = this\n\n        if ($next.hasClass('active')) return (this.sliding = false)\n\n        var relatedTarget = $next[0]\n        var slideEvent = eventer.create('slide.bs.carousel', {\n            relatedTarget: relatedTarget,\n            direction: direction\n        })\n        this.$element.trigger(slideEvent)\n        if (slideEvent.isDefaultPrevented()) return\n\n        this.sliding = true\n\n        isCycling && this.pause()\n\n        if (this.$indicators.length) {\n            this.$indicators.find('.active').removeClass('active')\n            var $nextIndicator = $(this.$indicators.children()[this.getItemIndex($next)])\n            $nextIndicator && $nextIndicator.addClass('active')\n        }\n\n        var slidEvent = eventer.create('slid.bs.carousel', { relatedTarget: relatedTarget, direction: direction }) // yes, \"slid\"\n        if (browser.support.transition && this.$element.hasClass('slide')) {\n            $next.addClass(type)\n            $next[0].offsetWidth // force reflow\n            $active.addClass(direction)\n            $next.addClass(direction)\n            $active\n                .one('transitionEnd', function() {\n                    $next.removeClass([type, direction].join(' ')).addClass('active')\n                    $active.removeClass(['active', direction].join(' '))\n                    that.sliding = false\n                    setTimeout(function() {\n                        that.$element.trigger(slidEvent)\n                    }, 0)\n                })\n                .emulateTransitionEnd()\n        } else {\n            $active.removeClass('active')\n            $next.addClass('active')\n            this.sliding = false\n            this.$element.trigger(slidEvent)\n        }\n\n        isCycling && this.cycle()\n\n        return this\n    }\n\n\n    // CAROUSEL PLUGIN DEFINITION\n    // ==========================\n    /*\n    function Plugin(option) {\n        return this.each(function() {\n            var $this = $(this)\n            var wgt = $this.data('bs.carousel')\n            var options = langx.mixin({}, Carousel.DEFAULTS, $this.data(), typeof option == 'object' && option)\n            var action = typeof option == 'string' ? option : options.slide\n\n            if (!wgt) {\n                $this.data('bs.carousel', (wgt = new Carousel(this, options)));\n            }\n            if (typeof option == 'number') {\n                wgt.to(option);\n            } else if (action) {\n                wgt[action]()\n            } else if (options.interval) {\n                wgt.pause().cycle();\n            }\n        })\n    }\n    */\n    plugins.register(Carousel,\"carousel\");\n\n    return Carousel;\n\n});"]}