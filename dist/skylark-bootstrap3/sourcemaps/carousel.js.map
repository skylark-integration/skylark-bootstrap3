{"version":3,"sources":["carousel.js"],"names":["define","langx","browser","eventer","noder","geom","$","plugins","bs3","Carousel","Plugin","inherit","klassName","pluginName","options","interval","pause","wrap","keyboard","_construct","element","this","overrided","$element","$indicators","find","paused","sliding","$active","$items","on","proxy","keydown","document","documentElement","cycle","e","href","$this","$target","attr","replace","hasClass","mixin","data","slideIndex","call","to","preventDefault","VERSION","TRANSITION_DURATION","DEFAULTS","prototype","test","target","tagName","which","prev","next","clearInterval","setInterval","getItemIndex","item","parent","children","index","getItemForDirection","direction","active","activeIndex","willWrap","length","delta","itemIndex","eq","pos","that","one","slide","support","transition","trigger","end","type","$next","isCycling","relatedTarget","slideEvent","create","isDefaultPrevented","removeClass","$nextIndicator","addClass","slidEvent","offsetWidth","join","setTimeout","emulateTransitionEnd","register"],"mappings":"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","file":"../carousel.js","sourcesContent":["define([\n    \"skylark-langx/langx\",\n    \"skylark-utils-dom/browser\",\n    \"skylark-utils-dom/eventer\",\n    \"skylark-utils-dom/noder\",\n    \"skylark-utils-dom/geom\",\n    \"skylark-utils-dom/query\",\n    \"skylark-utils-dom/plugins\",\n    \"./bs3\"\n], function(langx, browser, eventer, noder, geom, $, plugins, bs3) {\n\n    /* ========================================================================\n     * Bootstrap: carousel.js v3.3.7\n     * http://getbootstrap.com/javascript/#carousel\n     * ========================================================================\n     * Copyright 2011-2016 Twitter, Inc.\n     * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n     * ======================================================================== */\n\n    'use strict';\n\n    // CAROUSEL CLASS DEFINITION\n    // =========================\n\n    var Carousel = bs3.Carousel = plugins.Plugin.inherit({\n        klassName: \"Carousel\",\n\n        pluginName: \"bs3.carousel\",\n\n        options : {\n            interval: 5000,\n            pause: 'hover',\n            wrap: true,\n            keyboard: true\n\n        },\n\n        _construct: function(element, options) {\n            //this.options = options\n            this.overrided(element,options);\n\n            this.$element = $(element)\n            this.$indicators = this.$element.find('.carousel-indicators')\n            this.paused = null\n            this.sliding = null\n            this.interval = null\n            this.$active = null\n            this.$items = null\n\n            this.options.keyboard && this.$element.on('keydown.bs.carousel', langx.proxy(this.keydown, this))\n\n            this.options.pause == 'hover' && !('ontouchstart' in document.documentElement) && this.$element\n                .on('mouseenter.bs.carousel', langx.proxy(this.pause, this))\n                .on('mouseleave.bs.carousel', langx.proxy(this.cycle, this));\n\n            this.$element.on(\"click.bs.carousel.data-api\", \"[data-slide],[data-slide-to]\", function(e) {\n                var href\n                var $this = $(this)\n                var $target = $($this.attr('data-target') || (href = $this.attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '')) // strip for ie7\n                if (!$target.hasClass('carousel')) return\n                var options = langx.mixin({}, $target.data(), $this.data());\n                var slideIndex = $this.attr('data-slide-to')\n                if (slideIndex) options.interval = false\n\n                Plugin.call($target, options);\n\n                if (slideIndex) {\n                    $target.data('bs.carousel').to(slideIndex);\n                }\n\n                e.preventDefault();\n\n            });\n        }\n    });\n\n    // var Carousel = function (element, options) {\n    // }\n\n    Carousel.VERSION = '3.3.7'\n\n    Carousel.TRANSITION_DURATION = 600\n\n    Carousel.DEFAULTS = {\n        interval: 5000,\n        pause: 'hover',\n        wrap: true,\n        keyboard: true\n    }\n\n    Carousel.prototype.keydown = function(e) {\n        if (/input|textarea/i.test(e.target.tagName)) return\n        switch (e.which) {\n            case 37:\n                this.prev();\n                break\n            case 39:\n                this.next();\n                break\n            default:\n                return\n        }\n\n        e.preventDefault()\n    }\n\n    Carousel.prototype.cycle = function(e) {\n        e || (this.paused = false)\n\n        this.interval && clearInterval(this.interval)\n\n        this.options.interval &&\n            !this.paused &&\n            (this.interval = setInterval(langx.proxy(this.next, this), this.options.interval))\n\n        return this\n    }\n\n    Carousel.prototype.getItemIndex = function(item) {\n        this.$items = item.parent().children('.item')\n        return this.$items.index(item || this.$active)\n    }\n\n    Carousel.prototype.getItemForDirection = function(direction, active) {\n        var activeIndex = this.getItemIndex(active)\n        var willWrap = (direction == 'prev' && activeIndex === 0) ||\n            (direction == 'next' && activeIndex == (this.$items.length - 1))\n        if (willWrap && !this.options.wrap) return active\n        var delta = direction == 'prev' ? -1 : 1\n        var itemIndex = (activeIndex + delta) % this.$items.length\n        return this.$items.eq(itemIndex)\n    }\n\n    Carousel.prototype.to = function(pos) {\n        var that = this\n        var activeIndex = this.getItemIndex(this.$active = this.$element.find('.item.active'))\n\n        if (pos > (this.$items.length - 1) || pos < 0) return\n\n        if (this.sliding) return this.$element.one('slid.bs.carousel', function() { that.to(pos) }) // yes, \"slid\"\n        if (activeIndex == pos) return this.pause().cycle()\n\n        return this.slide(pos > activeIndex ? 'next' : 'prev', this.$items.eq(pos))\n    }\n\n    Carousel.prototype.pause = function(e) {\n        e || (this.paused = true)\n\n        if (this.$element.find('.next, .prev').length && browser.support.transition) {\n            this.$element.trigger(browser.support.transition.end)\n            this.cycle(true)\n        }\n\n        this.interval = clearInterval(this.interval)\n\n        return this\n    }\n\n    Carousel.prototype.next = function() {\n        if (this.sliding) return\n        return this.slide('next')\n    }\n\n    Carousel.prototype.prev = function() {\n        if (this.sliding) return\n        return this.slide('prev')\n    }\n\n    Carousel.prototype.slide = function(type, next) {\n        var $active = this.$element.find('.item.active')\n        var $next = next || this.getItemForDirection(type, $active)\n        var isCycling = this.interval\n        var direction = type == 'next' ? 'left' : 'right'\n        var that = this\n\n        if ($next.hasClass('active')) return (this.sliding = false)\n\n        var relatedTarget = $next[0]\n        var slideEvent = eventer.create('slide.bs.carousel', {\n            relatedTarget: relatedTarget,\n            direction: direction\n        })\n        this.$element.trigger(slideEvent)\n        if (slideEvent.isDefaultPrevented()) return\n\n        this.sliding = true\n\n        isCycling && this.pause()\n\n        if (this.$indicators.length) {\n            this.$indicators.find('.active').removeClass('active')\n            var $nextIndicator = $(this.$indicators.children()[this.getItemIndex($next)])\n            $nextIndicator && $nextIndicator.addClass('active')\n        }\n\n        var slidEvent = eventer.create('slid.bs.carousel', { relatedTarget: relatedTarget, direction: direction }) // yes, \"slid\"\n        if (browser.support.transition && this.$element.hasClass('slide')) {\n            $next.addClass(type)\n            $next[0].offsetWidth // force reflow\n            $active.addClass(direction)\n            $next.addClass(direction)\n            $active\n                .one('transitionEnd', function() {\n                    $next.removeClass([type, direction].join(' ')).addClass('active')\n                    $active.removeClass(['active', direction].join(' '))\n                    that.sliding = false\n                    setTimeout(function() {\n                        that.$element.trigger(slidEvent)\n                    }, 0)\n                })\n                .emulateTransitionEnd()\n        } else {\n            $active.removeClass('active')\n            $next.addClass('active')\n            this.sliding = false\n            this.$element.trigger(slidEvent)\n        }\n\n        isCycling && this.cycle()\n\n        return this\n    }\n\n\n    // CAROUSEL PLUGIN DEFINITION\n    // ==========================\n    /*\n    function Plugin(option) {\n        return this.each(function() {\n            var $this = $(this)\n            var wgt = $this.data('bs.carousel')\n            var options = langx.mixin({}, Carousel.DEFAULTS, $this.data(), typeof option == 'object' && option)\n            var action = typeof option == 'string' ? option : options.slide\n\n            if (!wgt) {\n                $this.data('bs.carousel', (wgt = new Carousel(this, options)));\n            }\n            if (typeof option == 'number') {\n                wgt.to(option);\n            } else if (action) {\n                wgt[action]()\n            } else if (options.interval) {\n                wgt.pause().cycle();\n            }\n        })\n    }\n    */\n    plugins.register(Carousel,\"carousel\");\n\n    return Carousel;\n\n});"]}