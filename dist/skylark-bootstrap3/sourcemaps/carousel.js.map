{"version":3,"sources":["carousel.js"],"names":["define","langx","browser","eventer","noder","geom","$","plugins","bs3","Carousel","Plugin","inherit","klassName","pluginName","_construct","element","options","mixin","DEFAULTS","data","this","overrided","$element","$indicators","find","paused","sliding","interval","$active","$items","self","embeded","keyboard","on","proxy","keydown","pause","document","documentElement","cycle","e","$this","slide","attr","slideIndex","prev","next","to","preventDefault","VERSION","TRANSITION_DURATION","wrap","prototype","test","target","tagName","which","clearInterval","setInterval","getItemIndex","item","parent","children","index","getItemForDirection","direction","active","activeIndex","length","itemIndex","eq","pos","that","one","support","transition","trigger","end","type","$next","isCycling","hasClass","relatedTarget","slideEvent","create","isDefaultPrevented","removeClass","$nextIndicator","addClass","slidEvent","offsetWidth","join","setTimeout","emulateTransitionEnd","register","action"],"mappings":"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","file":"../carousel.js","sourcesContent":["define([\n    \"skylark-langx/langx\",\n    \"skylark-utils-dom/browser\",\n    \"skylark-utils-dom/eventer\",\n    \"skylark-utils-dom/noder\",\n    \"skylark-utils-dom/geom\",\n    \"skylark-utils-dom/query\",\n    \"skylark-utils-dom/plugins\",\n    \"./bs3\",\n    \"./transition\"\n], function(langx, browser, eventer, noder, geom, $, plugins, bs3) {\n\n    /* ========================================================================\n     * Bootstrap: carousel.js v3.3.7\n     * http://getbootstrap.com/javascript/#carousel\n     * ========================================================================\n     * Copyright 2011-2016 Twitter, Inc.\n     * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n     * ======================================================================== */\n\n    'use strict';\n\n    // CAROUSEL CLASS DEFINITION\n    // =========================\n\n    var Carousel = bs3.Carousel = plugins.Plugin.inherit({\n        klassName: \"Carousel\",\n\n        pluginName: \"bs3.carousel\",\n\n        _construct: function(element, options) {\n            options = langx.mixin({}, Carousel.DEFAULTS, $(element).data(), options);\n            //this.options = options\n            this.overrided(element,options);\n\n            this.$element = $(element)\n            this.$indicators = this.$element.find('.carousel-indicators')\n            this.paused = null\n            this.sliding = null\n            this.interval = null\n            this.$active = null\n            this.$items = null\n\n            var self = this;\n            if (!this.options.embeded) {\n                this.options.keyboard && this.$element.on('keydown.bs.carousel', langx.proxy(this.keydown, this))\n\n                this.options.pause == 'hover' && !('ontouchstart' in document.documentElement) && this.$element\n                    .on('mouseenter.bs3.carousel', langx.proxy(this.pause, this))\n                    .on('mouseleave.bs3.carousel', langx.proxy(this.cycle, this));\n\n                this.$element.on(\"click.bs3.carousel.data-api\", \"[data-slide],[data-slide-to]\", function(e) {\n                    var $this = $(this),\n                        slide = $this.attr('data-slide'),\n                        slideIndex = $this.attr('data-slide-to');\n\n                    if (slide == \"prev\") {\n                        self.prev();\n                    } else if (slide == \"next\") {\n                        self.next();\n                    } else  if (slideIndex) {\n                        self.to(slideIndex);\n                    }\n                    e.preventDefault();\n                });\n            }\n        }\n    });\n\n    // var Carousel = function (element, options) {\n    // }\n\n    Carousel.VERSION = '3.3.7'\n\n    Carousel.TRANSITION_DURATION = 600\n\n    Carousel.DEFAULTS = {\n        interval: 5000,\n        pause: 'hover',\n        wrap: true,\n        keyboard: true\n    }\n\n    Carousel.prototype.keydown = function(e) {\n        if (/input|textarea/i.test(e.target.tagName)) return\n        switch (e.which) {\n            case 37:\n                this.prev();\n                break\n            case 39:\n                this.next();\n                break\n            default:\n                return\n        }\n\n        e.preventDefault()\n    }\n\n    Carousel.prototype.cycle = function(e) {\n        e || (this.paused = false)\n\n        this.interval && clearInterval(this.interval)\n\n        this.options.interval &&\n            !this.paused &&\n            (this.interval = setInterval(langx.proxy(this.next, this), this.options.interval))\n\n        return this\n    }\n\n    Carousel.prototype.getItemIndex = function(item) {\n        this.$items = item.parent().children('.item')\n        return this.$items.index(item || this.$active)\n    }\n\n    Carousel.prototype.getItemForDirection = function(direction, active) {\n        var activeIndex = this.getItemIndex(active)\n        var willWrap = (direction == 'prev' && activeIndex === 0) ||\n            (direction == 'next' && activeIndex == (this.$items.length - 1))\n        if (willWrap && !this.options.wrap) return active\n        var delta = direction == 'prev' ? -1 : 1\n        var itemIndex = (activeIndex + delta) % this.$items.length\n        return this.$items.eq(itemIndex)\n    }\n\n    Carousel.prototype.to = function(pos) {\n        var that = this\n        var activeIndex = this.getItemIndex(this.$active = this.$element.find('.item.active'))\n\n        if (pos > (this.$items.length - 1) || pos < 0) return\n\n        if (this.sliding) return this.$element.one('slid.bs.carousel', function() { that.to(pos) }) // yes, \"slid\"\n        if (activeIndex == pos) return this.pause().cycle()\n\n        return this.slide(pos > activeIndex ? 'next' : 'prev', this.$items.eq(pos))\n    }\n\n    Carousel.prototype.pause = function(e) {\n        e || (this.paused = true)\n\n        if (this.$element.find('.next, .prev').length && browser.support.transition) {\n            this.$element.trigger(browser.support.transition.end)\n            this.cycle(true)\n        }\n\n        this.interval = clearInterval(this.interval)\n\n        return this\n    }\n\n    Carousel.prototype.next = function() {\n        if (this.sliding) return\n        return this.slide('next')\n    }\n\n    Carousel.prototype.prev = function() {\n        if (this.sliding) return\n        return this.slide('prev')\n    }\n\n    Carousel.prototype.slide = function(type, next) {\n        var $active = this.$element.find('.item.active')\n        var $next = next || this.getItemForDirection(type, $active)\n        var isCycling = this.interval\n        var direction = type == 'next' ? 'left' : 'right'\n        var that = this\n\n        if ($next.hasClass('active')) return (this.sliding = false)\n\n        var relatedTarget = $next[0]\n        var slideEvent = eventer.create('slide.bs.carousel', {\n            relatedTarget: relatedTarget,\n            direction: direction\n        })\n        this.$element.trigger(slideEvent)\n        if (slideEvent.isDefaultPrevented()) return\n\n        this.sliding = true\n\n        isCycling && this.pause()\n\n        if (this.$indicators.length) {\n            this.$indicators.find('.active').removeClass('active')\n            var $nextIndicator = $(this.$indicators.children()[this.getItemIndex($next)])\n            $nextIndicator && $nextIndicator.addClass('active')\n        }\n\n        var slidEvent = eventer.create('slid.bs.carousel', { relatedTarget: relatedTarget, direction: direction }) // yes, \"slid\"\n        if (browser.support.transition && this.$element.hasClass('slide')) {\n            $next.addClass(type)\n            $next[0].offsetWidth // force reflow\n            $active.addClass(direction)\n            $next.addClass(direction)\n            $active\n                .one('transitionEnd', function() {\n                    $next.removeClass([type, direction].join(' ')).addClass('active')\n                    $active.removeClass(['active', direction].join(' '))\n                    that.sliding = false\n                    setTimeout(function() {\n                        that.$element.trigger(slidEvent)\n                    }, 0)\n                })\n                .emulateTransitionEnd()\n        } else {\n            $active.removeClass('active')\n            $next.addClass('active')\n            this.sliding = false\n            this.$element.trigger(slidEvent)\n        }\n\n        isCycling && this.cycle()\n\n        return this\n    }\n\n\n    // CAROUSEL PLUGIN DEFINITION\n    // ==========================\n    /*\n    function Plugin(option) {\n        return this.each(function() {\n            var $this = $(this)\n            var wgt = $this.data('bs.carousel')\n            var options = langx.mixin({}, Carousel.DEFAULTS, $this.data(), typeof option == 'object' && option)\n            var action = typeof option == 'string' ? option : options.slide\n\n            if (!wgt) {\n                $this.data('bs.carousel', (wgt = new Carousel(this, options)));\n            }\n            if (typeof option == 'number') {\n                wgt.to(option);\n            } else if (action) {\n                wgt[action]()\n            } else if (options.interval) {\n                wgt.pause().cycle();\n            }\n        })\n    }\n    */\n    plugins.register(Carousel,\"carousel\",function(options){\n        //this -> plugin instance\n        var action = typeof options == 'string' ? options : options.slide\n        if (typeof options == 'number') {\n            this.to(options);\n        } else if (action) {\n            this[action]()\n        } else if (options.interval) {\n            this.pause().cycle();\n        }        \n    });\n\n    return Carousel;\n\n});"]}