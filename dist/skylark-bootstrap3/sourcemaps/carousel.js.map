{"version":3,"sources":["carousel.js"],"names":["define","langx","browser","eventer","noder","geom","$","plugins","bs3","Carousel","Plugin","inherit","klassName","pluginName","options","interval","pause","wrap","keyboard","_construct","element","this","overrided","$element","$indicators","find","paused","sliding","$active","$items","self","embeded","on","proxy","keydown","document","documentElement","cycle","e","$this","slide","attr","slideIndex","prev","next","to","preventDefault","VERSION","TRANSITION_DURATION","DEFAULTS","prototype","test","target","tagName","which","clearInterval","setInterval","getItemIndex","item","parent","children","index","getItemForDirection","direction","active","activeIndex","length","itemIndex","eq","pos","that","one","support","transition","trigger","end","type","$next","isCycling","hasClass","relatedTarget","slideEvent","create","isDefaultPrevented","removeClass","$nextIndicator","addClass","slidEvent","offsetWidth","join","setTimeout","emulateTransitionEnd","register","fn","carousel","option","each","plugin","instantiate","mixin","data","action"],"mappings":"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","file":"../carousel.js","sourcesContent":["define([\n    \"skylark-langx/langx\",\n    \"skylark-utils-dom/browser\",\n    \"skylark-utils-dom/eventer\",\n    \"skylark-utils-dom/noder\",\n    \"skylark-utils-dom/geom\",\n    \"skylark-utils-dom/query\",\n    \"skylark-utils-dom/plugins\",\n    \"./bs3\",\n    \"./transition\"\n], function(langx, browser, eventer, noder, geom, $, plugins, bs3) {\n\n    /* ========================================================================\n     * Bootstrap: carousel.js v3.3.7\n     * http://getbootstrap.com/javascript/#carousel\n     * ========================================================================\n     * Copyright 2011-2016 Twitter, Inc.\n     * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n     * ======================================================================== */\n\n    'use strict';\n\n    // CAROUSEL CLASS DEFINITION\n    // =========================\n\n    var Carousel = bs3.Carousel = plugins.Plugin.inherit({\n        klassName: \"Carousel\",\n\n        pluginName: \"bs3.carousel\",\n\n        options : {\n            interval: 5000,\n            pause: 'hover',\n            wrap: true,\n            keyboard: true\n\n        },\n\n        _construct: function(element, options) {\n            //this.options = options\n            this.overrided(element,options);\n\n            this.$element = $(element)\n            this.$indicators = this.$element.find('.carousel-indicators')\n            this.paused = null\n            this.sliding = null\n            this.interval = null\n            this.$active = null\n            this.$items = null\n\n            var self = this;\n            if (!this.options.embeded) {\n                this.options.keyboard && this.$element.on('keydown.bs.carousel', langx.proxy(this.keydown, this))\n\n                this.options.pause == 'hover' && !('ontouchstart' in document.documentElement) && this.$element\n                    .on('mouseenter.bs3.carousel', langx.proxy(this.pause, this))\n                    .on('mouseleave.bs3.carousel', langx.proxy(this.cycle, this));\n\n                this.$element.on(\"click.bs3.carousel.data-api\", \"[data-slide],[data-slide-to]\", function(e) {\n                    var $this = $(this),\n                        slide = $this.attr('data-slide'),\n                        slideIndex = $this.attr('data-slide-to');\n\n                    if (slide == \"prev\") {\n                        self.prev();\n                    } else if (slide == \"next\") {\n                        self.next();\n                    } else  if (slideIndex) {\n                        self.to(slideIndex);\n                    }\n                    e.preventDefault();\n                });\n            }\n        }\n    });\n\n    // var Carousel = function (element, options) {\n    // }\n\n    Carousel.VERSION = '3.3.7'\n\n    Carousel.TRANSITION_DURATION = 600\n\n    Carousel.DEFAULTS = {\n        interval: 5000,\n        pause: 'hover',\n        wrap: true,\n        keyboard: true\n    }\n\n    Carousel.prototype.keydown = function(e) {\n        if (/input|textarea/i.test(e.target.tagName)) return\n        switch (e.which) {\n            case 37:\n                this.prev();\n                break\n            case 39:\n                this.next();\n                break\n            default:\n                return\n        }\n\n        e.preventDefault()\n    }\n\n    Carousel.prototype.cycle = function(e) {\n        e || (this.paused = false)\n\n        this.interval && clearInterval(this.interval)\n\n        this.options.interval &&\n            !this.paused &&\n            (this.interval = setInterval(langx.proxy(this.next, this), this.options.interval))\n\n        return this\n    }\n\n    Carousel.prototype.getItemIndex = function(item) {\n        this.$items = item.parent().children('.item')\n        return this.$items.index(item || this.$active)\n    }\n\n    Carousel.prototype.getItemForDirection = function(direction, active) {\n        var activeIndex = this.getItemIndex(active)\n        var willWrap = (direction == 'prev' && activeIndex === 0) ||\n            (direction == 'next' && activeIndex == (this.$items.length - 1))\n        if (willWrap && !this.options.wrap) return active\n        var delta = direction == 'prev' ? -1 : 1\n        var itemIndex = (activeIndex + delta) % this.$items.length\n        return this.$items.eq(itemIndex)\n    }\n\n    Carousel.prototype.to = function(pos) {\n        var that = this\n        var activeIndex = this.getItemIndex(this.$active = this.$element.find('.item.active'))\n\n        if (pos > (this.$items.length - 1) || pos < 0) return\n\n        if (this.sliding) return this.$element.one('slid.bs.carousel', function() { that.to(pos) }) // yes, \"slid\"\n        if (activeIndex == pos) return this.pause().cycle()\n\n        return this.slide(pos > activeIndex ? 'next' : 'prev', this.$items.eq(pos))\n    }\n\n    Carousel.prototype.pause = function(e) {\n        e || (this.paused = true)\n\n        if (this.$element.find('.next, .prev').length && browser.support.transition) {\n            this.$element.trigger(browser.support.transition.end)\n            this.cycle(true)\n        }\n\n        this.interval = clearInterval(this.interval)\n\n        return this\n    }\n\n    Carousel.prototype.next = function() {\n        if (this.sliding) return\n        return this.slide('next')\n    }\n\n    Carousel.prototype.prev = function() {\n        if (this.sliding) return\n        return this.slide('prev')\n    }\n\n    Carousel.prototype.slide = function(type, next) {\n        var $active = this.$element.find('.item.active')\n        var $next = next || this.getItemForDirection(type, $active)\n        var isCycling = this.interval\n        var direction = type == 'next' ? 'left' : 'right'\n        var that = this\n\n        if ($next.hasClass('active')) return (this.sliding = false)\n\n        var relatedTarget = $next[0]\n        var slideEvent = eventer.create('slide.bs.carousel', {\n            relatedTarget: relatedTarget,\n            direction: direction\n        })\n        this.$element.trigger(slideEvent)\n        if (slideEvent.isDefaultPrevented()) return\n\n        this.sliding = true\n\n        isCycling && this.pause()\n\n        if (this.$indicators.length) {\n            this.$indicators.find('.active').removeClass('active')\n            var $nextIndicator = $(this.$indicators.children()[this.getItemIndex($next)])\n            $nextIndicator && $nextIndicator.addClass('active')\n        }\n\n        var slidEvent = eventer.create('slid.bs.carousel', { relatedTarget: relatedTarget, direction: direction }) // yes, \"slid\"\n        if (browser.support.transition && this.$element.hasClass('slide')) {\n            $next.addClass(type)\n            $next[0].offsetWidth // force reflow\n            $active.addClass(direction)\n            $next.addClass(direction)\n            $active\n                .one('transitionEnd', function() {\n                    $next.removeClass([type, direction].join(' ')).addClass('active')\n                    $active.removeClass(['active', direction].join(' '))\n                    that.sliding = false\n                    setTimeout(function() {\n                        that.$element.trigger(slidEvent)\n                    }, 0)\n                })\n                .emulateTransitionEnd()\n        } else {\n            $active.removeClass('active')\n            $next.addClass('active')\n            this.sliding = false\n            this.$element.trigger(slidEvent)\n        }\n\n        isCycling && this.cycle()\n\n        return this\n    }\n\n\n    // CAROUSEL PLUGIN DEFINITION\n    // ==========================\n    /*\n    function Plugin(option) {\n        return this.each(function() {\n            var $this = $(this)\n            var wgt = $this.data('bs.carousel')\n            var options = langx.mixin({}, Carousel.DEFAULTS, $this.data(), typeof option == 'object' && option)\n            var action = typeof option == 'string' ? option : options.slide\n\n            if (!wgt) {\n                $this.data('bs.carousel', (wgt = new Carousel(this, options)));\n            }\n            if (typeof option == 'number') {\n                wgt.to(option);\n            } else if (action) {\n                wgt[action]()\n            } else if (options.interval) {\n                wgt.pause().cycle();\n            }\n        })\n    }\n    */\n    plugins.register(Carousel);\n\n    $.fn.carousel = function(option) {\n        return this.each(function () {\n            var $this = $(this)\n            var plugin = plugins.instantiate(this,'bs3.carousel',\"instance\");\n            var options = langx.mixin({}, Carousel.DEFAULTS, $this.data(), typeof option == 'object' && option)\n            var action = typeof option == 'string' ? option : options.slide\n\n            if (!plugin) {\n                plugin = plugins.instantiate(this,'bs3.carousel',options);\n            }\n            if (typeof option == 'number') {\n                plugin.to(option);\n            } else if (action) {\n                plugin[action]()\n            } else if (options.interval) {\n                plugin.pause().cycle();\n            }\n        });\n    };\n\n    return Carousel;\n\n});"]}