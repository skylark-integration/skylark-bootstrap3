{"version":3,"sources":["dropdown.js"],"names":["define","langx","browser","eventer","noder","geom","$","plugins","bs3","backdrop","toggle","Dropdown","Plugin","inherit","klassName","pluginName","_construct","element","options","$el","this","$element","on","keydown","e","$this","is","$parent","getParent","isActive","hasClass","clearMenus","document","documentElement","closest","length","createElement","addClass","insertAfter","relatedTarget","trigger","create","isDefaultPrevented","attr","toggleClass","test","which","target","tagName","preventDefault","stopPropagation","find","$items","index","eq","selector","replace","parent","remove","each","type","contains","removeClass","VERSION","register"],"mappings":"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","file":"../dropdown.js","sourcesContent":["define([\n  \"skylark-langx/langx\",\n  \"skylark-domx-browser\",\n  \"skylark-domx-eventer\",\n  \"skylark-domx-noder\",\n  \"skylark-domx-geom\",\n  \"skylark-domx-query\",\n  \"skylark-domx-plugins\",\n  \"./bs3\"\n],function(langx,browser,eventer,noder,geom,$,plugins,bs3){\n\n/* ========================================================================\n * Bootstrap: dropdown.js v3.3.7\n * http://getbootstrap.com/javascript/#dropdowns\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n  'use strict';\n\n  // DROPDOWN CLASS DEFINITION\n  // =========================\n\n  var backdrop = '.dropdown-backdrop';\n  var toggle   = '[data-toggle=\"dropdown\"]';\n\n  var Dropdown = bs3.Dropdown = plugins.Plugin.inherit({\n    klassName: \"Dropdown\",\n\n    pluginName : \"bs3.dropdown\",\n\n    _construct : function(element,options) {\n      var $el = this.$element = $(element);\n      $el.on('click.bs.dropdown', this.toggle);\n      $el.on('keydown.bs.dropdown', '[data-toggle=\"dropdown\"],.dropdown-menu',this.keydown);\n    },\n\n    toggle : function (e) {\n      var $this = $(this)\n\n      if ($this.is('.disabled, :disabled')) return\n\n      var $parent  = getParent($this)\n      var isActive = $parent.hasClass('open')\n\n      clearMenus()\n\n      if (!isActive) {\n        if ('ontouchstart' in document.documentElement && !$parent.closest('.navbar-nav').length) {\n          // if mobile we use a backdrop because click events don't delegate\n          $(document.createElement('div'))\n            .addClass('dropdown-backdrop')\n            .insertAfter($(this))\n            .on('click', clearMenus)\n        }\n\n        var relatedTarget = { relatedTarget: this }\n        $parent.trigger(e = eventer.create('show.bs.dropdown', relatedTarget))\n\n        if (e.isDefaultPrevented()) return\n\n        $this\n          .trigger('focus')\n          .attr('aria-expanded', 'true')\n\n        $parent\n          .toggleClass('open')\n          .trigger(eventer.create('shown.bs.dropdown', relatedTarget))\n      }\n\n      return false\n    },\n\n    keydown : function (e) {\n      if (!/(38|40|27|32)/.test(e.which) || /input|textarea/i.test(e.target.tagName)) return\n\n      var $this = $(this)\n\n      e.preventDefault()\n      e.stopPropagation()\n\n      if ($this.is('.disabled, :disabled')) return\n\n      var $parent  = getParent($this)\n      var isActive = $parent.hasClass('open')\n\n      if (!isActive && e.which != 27 || isActive && e.which == 27) {\n        if (e.which == 27) $parent.find(toggle).trigger('focus')\n        return $this.trigger('click')\n      }\n\n      var desc = ' li:not(.disabled):visible a'\n      var $items = $parent.find('.dropdown-menu' + desc)\n\n      if (!$items.length) return\n\n      var index = $items.index(e.target)\n\n      if (e.which == 38 && index > 0)                 index--         // up\n      if (e.which == 40 && index < $items.length - 1) index++         // down\n      if (!~index)                                    index = 0\n\n      $items.eq(index).trigger('focus')\n    }\n\n  });\n\n  Dropdown.VERSION = '3.3.7'\n\n  function getParent($this) {\n    var selector = $this.attr('data-target')\n\n    if (!selector) {\n      selector = $this.attr('href')\n      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\\s]*$)/, '') // strip for ie7\n    }\n\n    var $parent = selector && $(selector)\n\n    return $parent && $parent.length ? $parent : $this.parent()\n  }\n\n  function clearMenus(e) {\n    if (e && e.which === 3) return\n    $(backdrop).remove()\n    $(toggle).each(function () {\n      var $this         = $(this)\n      var $parent       = getParent($this)\n      var relatedTarget = { relatedTarget: this }\n\n      if (!$parent.hasClass('open')) return\n\n      if (e && e.type == 'click' && /input|textarea/i.test(e.target.tagName) && noder.contains($parent[0], e.target)) return\n\n      $parent.trigger(e = eventer.create('hide.bs.dropdown', relatedTarget))\n\n      if (e.isDefaultPrevented()) return\n\n      $this.attr('aria-expanded', 'false')\n      $parent.removeClass('open').trigger(eventer.create('hidden.bs.dropdown', relatedTarget))\n    })\n  }\n\n\n  /*\n  // DROPDOWN PLUGIN DEFINITION\n  // ==========================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this = $(this)\n      var data  = $this.data('bs.dropdown')\n\n      if (!data) $this.data('bs.dropdown', (data = new Dropdown(this)))\n      if (typeof option == 'string') data[option].call($this)\n    })\n  }\n\n  var old = $.fn.dropdown\n\n  $.fn.dropdown             = Plugin;\n  $.fn.dropdown.Constructor = Dropdown;\n\n\n  // DROPDOWN NO CONFLICT\n  // ====================\n\n  $.fn.dropdown.noConflict = function () {\n    $.fn.dropdown = old\n    return this\n  }\n\n\n\n  return $.fn.dropdown;\n  */\n\n  // APPLY TO STANDARD DROPDOWN ELEMENTS\n  // ===================================\n  $(document)\n    .on('click.bs.dropdown.data-api', clearMenus)\n    .on('click.bs.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() });\n\n  plugins.register(Dropdown,\"dropdown\");\n\n  return Dropdown;\n\n});\n"]}